<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Crash Game - Updated</title>
<style>
  body {
    margin: 0;
    background: linear-gradient(to bottom, #0f0c29, #302b63, #24243e);
    color: white;
    font-family: 'Segoe UI', sans-serif;
    display: flex;
    flex-direction: column;
    height: 100vh;
    overflow: hidden;
  }
  #game-container {
    flex: 1;
    position: relative;
    background: radial-gradient(circle at 50% 80%, #1a1a2e, #0f0c29);
    overflow: hidden;
  }
  #plane {
    position: absolute;
    width: 162px; /* 10% Ø£ØµØºØ± Ù…Ù† 180 */
    bottom: 0;
    left: 0;
    transition: transform 0.1s linear;
    user-select: none;
    pointer-events: none;
  }
  #multiplierFloat {
    position: absolute;
    color: #00ff99;
    font-weight: bold;
    font-size: 1.8em;
    user-select: none;
    pointer-events: none;
    text-shadow: 0 0 6px #00ff99;
    white-space: nowrap;
  }
  #wallet {
    font-size: 1.3em;
    text-align: center;
    padding: 10px 0;
  }
  #controls {
    background: #111;
    padding: 15px 10px 30px 10px; /* padding bottom for spacing */
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
  }
  #countdown {
    font-size: 1.1em;
    margin-bottom: 8px;
    color: #ffaa00;
  }
  #betAmount {
    width: 100px;
    padding: 8px;
    font-size: 1.2em;
    border-radius: 6px;
    border: none;
    text-align: center;
  }
  .bet-options {
    display: flex;
    gap: 10px;
  }
  .bet-options button {
    padding: 8px 15px;
    font-size: 1em;
    border-radius: 6px;
    border: none;
    background-color: #333;
    color: white;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  .bet-options button:hover {
    background-color: #00ff99;
    color: black;
  }
  #btn-group {
    display: flex;
    gap: 20px;
    margin-top: 10px;
  }
  #startBtn, #cashoutBtn {
    padding: 14px 45px;
    font-size: 1.3em;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    font-weight: bold;
  }
  #startBtn {
    background-color: #ff0066;
    color: white;
  }
  #startBtn:disabled {
    background-color: grey;
    cursor: not-allowed;
  }
  #cashoutBtn {
    background-color: grey;
    color: white;
  }
  #cashoutBtn:disabled {
    background-color: #555;
    cursor: not-allowed;
  }
</style>
</head>
<body>

<div id="wallet">$100</div>

<div id="game-container">
  <img id="plane" src="https://cdn-icons-png.flaticon.com/512/483/483361.png" alt="Plane" />
  <div id="multiplierFloat">1.00x</div>
</div>

<div id="controls">
  <div id="countdown">Next round in 3 seconds</div>
  <input id="betAmount" type="number" min="1" value="10" />
  <div class="bet-options">
    <button data-value="5">5</button>
    <button data-value="10">10</button>
    <button data-value="20">20</button>
    <button data-value="1000">1000</button>
  </div>
  <div id="btn-group">
    <button id="startBtn">ÙˆØ¶Ø¹ Ø±Ù‡Ø§Ù†</button>
    <button id="cashoutBtn" disabled>Ø³Ø­Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</button>
  </div>
</div>

<script>
  const plane = document.getElementById('plane');
  const multiplierFloat = document.getElementById('multiplierFloat');
  const walletDisplay = document.getElementById('wallet');
  const countdownDisplay = document.getElementById('countdown');
  const betAmountInput = document.getElementById('betAmount');
  const betButtons = document.querySelectorAll('.bet-options button');
  const startBtn = document.getElementById('startBtn');
  const cashoutBtn = document.getElementById('cashoutBtn');

  let wallet = 100;
  let betAmount = 10;
  let multiplier = 1;
  let crashed = false;
  let playing = false;
  let countdown = 3;
  let countdownInterval;
  let gameInterval;

  betButtons.forEach(button => {
    button.addEventListener('click', () => {
      betAmountInput.value = button.getAttribute('data-value');
    });
  });

  betAmountInput.addEventListener('input', () => {
    betAmount = parseInt(betAmountInput.value) || 1;
  });

  function resetGame() {
    multiplier = 1;
    crashed = false;
    playing = false;
    multiplierFloat.textContent = '1.00x';
    plane.style.left = '0';
    plane.style.bottom = '0';
    cashoutBtn.disabled = true;
    startBtn.disabled = false;
    countdown = 3;
    countdownDisplay.textContent = `Next round in ${countdown} seconds`;
  }

  function startCountdown() {
    countdownDisplay.textContent = `Next round in ${countdown} seconds`;
    countdownInterval = setInterval(() => {
      countdown--;
      if (countdown <= 0) {
        clearInterval(countdownInterval);
        countdownDisplay.textContent = 'ðŸš€ Ø§Ù„Ø·Ø§Ø¦Ø±Ø© ØªÙ‚Ù„Ø¹!';
        startGame();
      } else {
        countdownDisplay.textContent = `Next round in ${countdown} seconds`;
      }
    }, 1000);
  }

  function startGame() {
    if (betAmount > wallet) {
      alert('Ø§Ù„Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ');
      resetGame();
      startCountdown();
      return;
    }
    playing = true;
    crashed = false;
    wallet -= betAmount;
    walletDisplay.textContent = `$${wallet.toFixed(2)}`;
    startBtn.disabled = true;
    cashoutBtn.disabled = false;
    multiplier = 1;

    let positionX = 0;
    let positionY = 0;
    let speedX = 3;
    let speedY = 1.5;

    gameInterval = setInterval(() => {
      if (crashed) {
        clearInterval(gameInterval);
        return;
      }
      multiplier += 0.01;
      multiplierFloat.textContent = multiplier.toFixed(2) + 'x';

      positionX += speedX;
      positionY += speedY;
      plane.style.left = positionX + 'px';
      plane.style.bottom = positionY + 'px';

      multiplierFloat.style.left = (positionX + 60) + 'px';
      multiplierFloat.style.bottom = (positionY + 20) + 'px';

      if (Math.random() < 0.01 + multiplier / 100 || positionX > window.innerWidth) {
        crashed = true;
        multiplierFloat.textContent = 'ðŸ’¥ ' + multiplier.toFixed(2) + 'x';
        cashoutBtn.disabled = true;
        startBtn.disabled = false;
        countdown = 3;
        countdownDisplay.textContent = `Next round in ${countdown} seconds`;
        walletDisplay.textContent = `$${wallet.toFixed(2)}`;
      }
    }, 50);
  }

  startBtn.onclick = () => {
    if (!playing) {
      startGame();
    }
  };

  cashoutBtn.onclick = () => {
    if (playing && !crashed) {
      playing = false;
      crashed = true;
      let win = betAmount * multiplier;
      wallet += win;
      walletDisplay.textContent = `$${wallet.toFixed(2)}`;
      multiplierFloat.textContent = 'ðŸŽ‰ Ø³Ø­Ø¨: ' + win.toFixed(2) + '$';
      cashoutBtn.disabled = true;
      startBtn.disabled = false;
      countdown = 3;
      countdownDisplay.textContent = `Next round in ${countdown} seconds`;
    }
  };

  window.onload = () => {
    resetGame();
    startCountdown();
  };
</script>
</body>
</html>
